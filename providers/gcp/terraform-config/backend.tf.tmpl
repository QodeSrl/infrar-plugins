# Terraform Backend Configuration for GCP
# Stores state in Google Cloud Storage
# Auto-generated by Infrar from template

terraform {
  backend "gcs" {
    bucket  = "{{ .Variables.state_bucket_name | default (printf "infrar-tfstate-%s" .Metadata.project_id) }}"
    prefix  = "terraform/state/{{ .ProjectID }}"

    {{- if .Variables.enable_state_locking }}
    # State locking configuration
    {{- end }}
  }
}

# Note: The state bucket must exist before terraform init
# Use bootstrap script to create the bucket if needed
